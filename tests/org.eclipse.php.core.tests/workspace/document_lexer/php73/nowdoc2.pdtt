--TEST--
Bug 551434 - false syntax error for Heredoc/Nowdoc expressions
--FILE--
<?php
class nowdocDemo {
    
    const EXAMPLE_1 = <<< 'NOWDOC'
Example string literal #1
    
-
NOWDOC;
    
    const EXAMPLE_2 = <<< 'NOWDOC'
Example string literal #2
    
-
NOWDOC;
    
    const EXAMPLE_3 = <<< 'NOWDOC'
Example string literal #3
    
=
NOWDOC;
    
    const EXAMPLE_4 = <<< 'NOWDOC'
Example string literal #4
    
-
NOWDOC;
    
    const EXAMPLE_5 = <<< "NOWDOC"
Example string literal #5

-
NOWDOC;
    
    const EXAMPLE_6 = <<< 'NOWDOC'
Example string literal #6
    
-
NOWDOC;
    
    const EXAMPLE_7 = <<< 'NOWDOC'
Example string literal #7
Another line with some content
Yet another line with some content
Another
    
-
NOWDOC;
    
    const EXAMPLE_8 = <<< 'NOWDOC'
Example string literal #8
    
- Content after the special char
NOWDOC;
    
    public $example9 = <<< 'NOWDOC'
Example string literal #9
    
-
NOWDOC;
    
    public function __construct() {
        
        $example10 = <<< 'NOWDOC'
Example string literal #10
    
-
NOWDOC;
        
        var_dump(
            <<< 'NOWDOC'
Example string literal #11
            
-
NOWDOC
            );
        
        <<< 'NOWDOC'
Example string literal
    
-
NOWDOC  && 1;
    }
}
?>
--EXPECT--
PHP_TOKEN|<|2
PHP_TOKEN|?|2
PHP_LABEL|php|2
WHITESPACE|
|2
PHP_CLASS|class|2
WHITESPACE| |2
PHP_LABEL|nowdocDemo|2
WHITESPACE| |2
PHP_CURLY_OPEN|{
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_1|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #1
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_2|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #2
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_3|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #3
    
=|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_4|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #4
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_5|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_HEREDOC_START_TAG|<<< "NOWDOC"
|16
PHP_ENCAPSED_AND_WHITESPACE|Example|16
PHP_ENCAPSED_AND_WHITESPACE| string|16
PHP_ENCAPSED_AND_WHITESPACE| literal|16
PHP_ENCAPSED_AND_WHITESPACE| #5
-|20
PHP_HEREDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_6|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #6
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_7|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #7
Another|14
PHP_CONSTANT_ENCAPSED_STRING| line with some content
Yet|14
PHP_CONSTANT_ENCAPSED_STRING| another line with some content
Another|14
PHP_CONSTANT_ENCAPSED_STRING|
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_CONST|const|36
WHITESPACE| |36
PHP_LABEL|EXAMPLE_8|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #8
    
- Content after the special char|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_PUBLIC|public|2
WHITESPACE| |2
PHP_VARIABLE|$example9|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #9
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
    
    |2
PHP_PUBLIC|public|2
WHITESPACE| |2
PHP_FUNCTION|function|36
WHITESPACE| |36
PHP_LABEL|__construct|2
PHP_TOKEN|(|2
PHP_TOKEN|)|2
WHITESPACE| |2
PHP_CURLY_OPEN|{
        
        |2
PHP_VARIABLE|$example10|2
WHITESPACE| |2
PHP_TOKEN|=|2
WHITESPACE| |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #10
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
PHP_SEMICOLON|;|2
WHITESPACE|
        
        |2
PHP_LABEL|var_dump|2
PHP_TOKEN|(|2
WHITESPACE|
            |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING| #11
            
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
WHITESPACE|
            |2
PHP_TOKEN|)|2
PHP_SEMICOLON|;|2
WHITESPACE|
        
        |2
PHP_NOWDOC_START_TAG|<<< 'NOWDOC'
|18
PHP_CONSTANT_ENCAPSED_STRING|Example|18
PHP_CONSTANT_ENCAPSED_STRING| string|18
PHP_CONSTANT_ENCAPSED_STRING| literal|18
PHP_CONSTANT_ENCAPSED_STRING|
    
-|34
PHP_NOWDOC_CLOSE_TAG|
NOWDOC|2
WHITESPACE|  |2
PHP_OPERATOR|&&|2
WHITESPACE| |2
PHP_NUMBER|1|2
PHP_SEMICOLON|;|2
WHITESPACE|
    |2
PHP_CURLY_CLOSE|}
|2
PHP_CURLY_CLOSE|}
|2
PHP_CLOSETAG|?>|2
